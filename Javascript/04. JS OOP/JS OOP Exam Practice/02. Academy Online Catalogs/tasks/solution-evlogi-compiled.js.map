{"version":3,"sources":["solution-evlogi.js"],"names":[],"mappings":"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","file":"solution-evlogi-compiled.js","sourcesContent":["function solve() { // start 11:30\n    if (!Array.prototype.find) {\n        Array.prototype.find = function (predicate) {\n            if (this == null) {\n                throw new TypeError('Array.prototype.find called on null or undefined');\n            }\n            if (typeof predicate !== 'function') {\n                throw new TypeError('predicate must be a function');\n            }\n            var list = Object(this);\n            var length = list.length >>> 0;\n            var thisArg = arguments[1];\n            var value;\n\n            for (var i = 0; i < length; i++) {\n                value = list[i];\n                if (predicate.call(thisArg, value, i, list)) {\n                    return value;\n                }\n            }\n            return undefined;\n        };\n    }\n    if (!Array.prototype.findIndex) {\n        Array.prototype.findIndex = function (predicate) {\n            if (this == null) {\n                throw new TypeError('Array.prototype.findIndex called on null or undefined');\n            }\n            if (typeof predicate !== 'function') {\n                throw new TypeError('predicate must be a function');\n            }\n            var list = Object(this);\n            var length = list.length >>> 0;\n            var thisArg = arguments[1];\n            var value;\n\n            for (var i = 0; i < length; i++) {\n                value = list[i];\n                if (predicate.call(thisArg, value, i, list)) {\n                    return i;\n                }\n            }\n            return -1;\n        };\n    }\n    if (!Object.keys) {\n        Object.keys = (function () {\n            'use strict';\n            var hasOwnProperty = Object.prototype.hasOwnProperty,\n                hasDontEnumBug = !({toString: null}).propertyIsEnumerable('toString'),\n                dontEnums = [\n                    'toString',\n                    'toLocaleString',\n                    'valueOf',\n                    'hasOwnProperty',\n                    'isPrototypeOf',\n                    'propertyIsEnumerable',\n                    'constructor'\n                ],\n                dontEnumsLength = dontEnums.length;\n\n            return function (obj) {\n                if (typeof obj !== 'object' && (typeof obj !== 'function' || obj === null)) {\n                    throw new TypeError('Object.keys called on non-object');\n                }\n\n                var result = [], prop, i;\n\n                for (prop in obj) {\n                    if (hasOwnProperty.call(obj, prop)) {\n                        result.push(prop);\n                    }\n                }\n\n                if (hasDontEnumBug) {\n                    for (i = 0; i < dontEnumsLength; i++) {\n                        if (hasOwnProperty.call(obj, dontEnums[i])) {\n                            result.push(dontEnums[i]);\n                        }\n                    }\n                }\n                return result;\n            };\n        }());\n    }\n\n    var catalogue, bookCatalogue, mediaCatalogue,\n        item, book, media,\n        CONSTS = {\n            NAME: {\n                MIN: 2,\n                MAX: 40\n            },\n            DESCRIPTION: {\n                MIN: 1,\n                MAX: 100000000\n            },\n            GENRE: {\n                MIN: 2,\n                MAX: 20\n            },\n            DURATION: {\n                MIN: 0,\n                MAX: 100000000\n            }\n        },\n        validate = {\n            isString: function (value, msg) {\n                msg = msg || ' non-existent or not a string';\n                if (!value || typeof value !== 'string') {\n                    throw Error(value + msg);\n                }\n            },\n            isNumber: function (value, msg) {\n                msg = msg || ' non-existent or not a number';\n                if ((!value && value !== 0) || typeof value !== 'number') {\n                    throw Error(value + msg);\n                }\n            },\n            isItem: function (value) {\n                return Object.keys(item)\n                    .every(function (key) {\n                        return (typeof value[key] !== 'undefined');\n                    });\n            },\n            isBook: function (value) {\n                var isBook = this.isItem(value) && Object.keys(book)\n                        .every(function (key) {\n                            return (typeof value[key] !== 'undefined');\n                        });\n                return isBook;\n            },\n            isMedia: function (value) {\n                var isMedia = this.isItem(value) && Object.keys(media)\n                        .every(function (key) {\n                            return (typeof value[key] !== 'undefined');\n                        });\n                return isMedia;\n            },\n            stringLength: function (value, min, max, msg) {\n                msg = msg || 'Invalid string length';\n                this.isString(value);\n                if (value.length < min || value.length > max) {\n                    throw Error(msg);\n                }\n            },\n            ISBN: function (value, msg) {\n                msg = msg || 'Invalid ISBN length';\n                //value = value.replace(/-/g, '');\n                this.isString(value);\n                if (value.length !== 10 && value.length !== 13) {\n                    throw Error(msg);\n                }\n            },\n            numberRange: function (value, min, max, msg) {\n                msg = msg || ' not in range';\n                this.isNumber(value);\n\n                if (value < min || value > max) {\n                    throw Error(value + msg + '[' + min + '..' + max + ']');\n                }\n            }\n        },\n        idGenerator = {\n            get: function () {\n                return (function () {\n                    var lastId = 0;\n                    return {\n                        getNext: function () {\n                            return lastId += 1;\n                        }\n                    };\n                }());\n            }\n        };\n\n    item = (function (parent) {\n        var closure = Object.create(parent),\n            idGen = idGenerator.get();\n\n        Object.defineProperty(closure, 'init', {\n            value: function (name, description) {\n                this._id = idGen.getNext();\n                this.name = name;\n                this.description = description;\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'id', {\n            enumerable: true,\n            get: function () {\n                return this._id;\n            }\n        });\n        Object.defineProperty(closure, 'name', {\n            enumerable: true,\n            get: function () {\n                return this._name;\n            },\n            set: function (value) {\n                validate.isString(value);\n                validate.stringLength(value, CONSTS.NAME.MIN, CONSTS.NAME.MAX);\n                this._name = value;\n            }\n        });\n        Object.defineProperty(closure, 'description', {\n            enumerable: true,\n            get: function () {\n                return this._description;\n            },\n            set: function (value) {\n                validate.isString(value);\n                validate.stringLength(value, CONSTS.DESCRIPTION.MIN, CONSTS.DESCRIPTION.MAX);\n                this._description = value;\n            }\n        });\n\n        return closure;\n    }({}));\n\n    book = (function (parent) {\n        var closure = Object.create(parent);\n\n        Object.defineProperty(closure, 'init', {\n            value: function (name, description, isbn, genre) {\n                parent.init.call(this, name, description);\n                this.isbn = isbn;\n                this.genre = genre;\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'isbn', {\n            enumerable: true,\n            get: function () {\n                return this._isbn;\n            },\n            set: function (value) {\n                validate.ISBN(value);\n                this._isbn = value;\n            }\n        });\n        Object.defineProperty(closure, 'genre', {\n            enumerable: true,\n            get: function () {\n                return this._genre;\n            },\n            set: function (value) {\n                validate.stringLength(value, CONSTS.GENRE.MIN, CONSTS.GENRE.MAX);\n                this._genre = value;\n            }\n        });\n\n        return closure;\n    }(item));\n\n    media = (function (parent) {\n        var closure = Object.create(parent);\n\n        Object.defineProperty(closure, 'init', {\n            value: function (name, description, duration, rating) {\n                parent.init.call(this, name, description);\n                this.duration = duration;\n                this.rating = rating;\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'duration', {\n            get: function () {\n                return this._duration;\n            },\n            set: function (value) {\n                value = +value;\n                validate.numberRange(value, 1, Infinity);\n                this._duration = value;\n            }\n        });\n        Object.defineProperty(closure, 'rating', {\n            get: function () {\n                return this._rating;\n            },\n            set: function (value) {\n                value = +value;\n                validate.numberRange(value, 1, 5);\n                this._rating = value;\n            }\n        });\n\n        return closure;\n    }(item));\n\n    catalogue = (function (parent) {\n        var closure = Object.create(parent),\n            idGen = idGenerator.get();\n\n        Object.defineProperty(closure, 'init', {\n            value: function (name) {\n                this._id = idGen.getNext();\n                this.name = name;\n                this.items = [];\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'id', {\n            get: function () {\n                return this._id;\n            }\n        });\n        Object.defineProperty(closure, 'name', {\n            get: function () {\n                return this._name;\n            },\n            set: function (value) {\n                validate.isString(value);\n                validate.stringLength(value, CONSTS.NAME.MIN, CONSTS.NAME.MAX);\n                this._name = value;\n            }\n        });\n        Object.defineProperty(closure, 'add', {\n            value: function (items) {\n                if (!arguments || !items) {\n                    throw Error('must pass parameters or array');\n                }\n\n                var current, arr = arguments[0];\n                if (!Array.isArray(arr)) {\n                    arr = arguments;\n                }\n\n                for (i = 0, len = arr.length; i < len; i += 1) {\n                    current = arr[i];\n                    this.items.push(current);\n                }\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'find', {\n            value: function (params) {\n                if (typeof params === 'object') {\n                    return this.items.filter(function (item) {\n                        return Object.keys(params)\n                            .every(function (key) {\n                                return item[key] === params[key];\n                            })\n                    });\n                } else {\n                    validate.isNumber(params);\n                    var foundItem = this.items.find(function (item) {\n                        return item.id === params;\n                    });\n                    return foundItem || null;\n                }\n            }\n        });\n        Object.defineProperty(closure, 'search', {\n            value: function (pattern) {\n                if (!pattern) {\n                    throw Error('search patternt is not defined');\n                }\n\n                return this.items.filter(function (item) {\n                    return item.name.indexOf(pattern) >= 0 ||\n                        item.description.indexOf(pattern) >= 0;\n                });\n            }\n        });\n\n        return closure;\n    }({}));\n\n    bookCatalogue = (function (parent) {\n        var closure = Object.create(parent);\n\n        Object.defineProperty(closure, 'init', {\n            value: function (name) {\n                parent.init.call(this, name);\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'add', {\n            value: function () {\n                var i, arr = arguments;\n\n                if (arguments[0] && arguments[0].length) {\n                    arr = arguments[0];\n                }\n\n                for (i in arr) {\n                    if (typeof arr[i] !== 'function' && !validate.isBook(arr[i])) {\n                        throw Error('cannot add non-book item');\n                    }\n                }\n\n                parent.add.apply(this, arguments);\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'getGenres', {\n            value: function () {\n                var genre, result = {};\n                this.items.map(function (item) {\n                    genre = item.genre.toLowerCase();\n                    if (!result[genre]) {\n                        result[genre] = 0;\n                    }\n\n                    result[genre] += 1;\n                });\n\n                return Object.keys(result);\n            }\n        });\n\n        return closure;\n    }(catalogue));\n\n    mediaCatalogue = (function (parent) {\n        var closure = Object.create(parent);\n\n        Object.defineProperty(closure, 'init', {\n            value: function (name) {\n                parent.init.call(this, name);\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'add', {\n            value: function () {\n                var i, arr = arguments;\n\n                if (arguments[0] && arguments[0].length) {\n                    arr = arguments[0];\n                }\n\n                for (i in arr) {\n                    if (typeof arr[i] !== 'function' && !validate.isMedia(arr[i])) {\n                        throw Error('cannot add non-media item');\n                    }\n                }\n\n                parent.add.apply(this, arguments);\n                return this;\n            }\n        });\n        Object.defineProperty(closure, 'getTop', {\n            value: function (count) {\n                count = +count;\n                if (!count || count < 1) {\n                    throw Error();\n                }\n\n                return this.items.sort(function (a, b) {\n                        return b.rating - a.rating;\n                    })\n                    .slice(0, count)\n                    .map(function(item) {\n                        return {\n                            id: item.id,\n                            name: item.name\n                        }\n                    });\n            }\n        });\n        Object.defineProperty(closure, 'getSortedByDuration', {\n            value: function () {\n                return this.items.sort(function(a,b) {\n                    if (a.duration !== b.duration) {\n                        return a.duration - b.duration;\n                    } else {\n                        return b.id - a.id;\n                    }\n                }).slice(0);\n            }\n        });\n\n        return closure;\n    }(catalogue));\n\n    return {\n        getBook: function (name, isbn, genre, description) {\n            return Object.create(book).init(name, description, isbn, genre);\n        },\n        getMedia: function (name, rating, duration, description) {\n            return Object.create(media).init(name, description, duration, rating);\n        },\n        getBookCatalog: function (name) {\n            return Object.create(bookCatalogue).init(name);\n        },\n        getMediaCatalog: function (name) {\n            return Object.create(mediaCatalogue).init(name);\n        }\n    };\n}\n\nmodule.exports = solve;"]}