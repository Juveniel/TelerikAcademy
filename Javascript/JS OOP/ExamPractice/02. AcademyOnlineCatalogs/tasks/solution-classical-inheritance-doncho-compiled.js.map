{"version":3,"sources":["solution-classical-inheritance-doncho.js"],"names":[],"mappings":"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","file":"solution-classical-inheritance-doncho-compiled.js","sourcesContent":["function solve() {\n    var Item,\n        Book,\n        Media,\n        Catalog,\n        BookCatalog,\n        MediaCatalog,\n        validator,\n        idGeneratorFactory;\n\n    idGeneratorFactory = {\n        get: function () {\n            return (function () {\n                var lastId = 0;\n                return {\n                    getNext: function () {\n                        return lastId += 1;\n                    }\n                };\n            }());\n        }\n    };\n\n    validator = (function () {\n        var CONSTS = {\n            ID: {\n                MIN: 0.00000,\n                MAX: Infinity\n            },\n            NAME: {\n                MIN: 2,\n                MAX: 40\n            },\n            DESCRIPTION: {\n                MIN: 1,\n                MAX: Infinity\n            },\n            GENRE: {\n                MIN: 2,\n                MAX: 20\n            },\n            RATING: {\n                MIN: 1,\n                MAX: 5\n            },\n            DURATION: {\n                MIN: 0.00001,\n                MAX: Infinity\n            },\n            PATTERN: {\n                MIN: 1,\n                MAX: Infinity\n            },\n            COUNT: {\n                MIN: 1,\n                MAX: Infinity\n            }\n        };\n\n        function validateString(str, min, max) {\n            if (typeof (str) !== 'string' ||\n                str.length < min ||\n                str.length > max) {\n                throw new Error('The string must have between ' + min + ' and ' + max + ' characters');\n            }\n        }\n\n        function validateNumber(n, min, max) {\n            if (typeof (n) !== 'number' ||\n                n < min ||\n                n > max) {\n                throw new Error('The number must be between ' + min + ' and ' + max);\n            }\n        }\n\n        function isNotChar(ch) {\n            return isNaN(+ch);\n        }\n\n        return {\n            validateId: function (id) {\n                validateNumber(id, CONSTS.ID.MIN, CONSTS.ID.MAX);\n            },\n            validateName: function (name) {\n                validateString(name, CONSTS.NAME.MIN, CONSTS.NAME.MAX);\n            },\n            validateISBN: function (isbn) {\n                var isString = typeof (isbn) === 'string';\n                var hasCorrectLength = isbn.length === 10 || isbn.length === 13;\n                var hasNotOnlyDigits = isbn.split('').some(isNotChar);\n                if (!isString || !hasCorrectLength || hasNotOnlyDigits) {\n                    throw new Error('The ISBN must contain exactly 10 or 13 digits');\n                }\n            },\n            validateDescription: function (description) {\n                validateString(description, CONSTS.DESCRIPTION.MIN, CONSTS.DESCRIPTION.MAX);\n            },\n            validateRating: function (rating) {\n                validateNumber(rating, CONSTS.RATING.MIN, CONSTS.RATING.MAX);\n            },\n            validateDuration: function (duration) {\n                validateNumber(duration, CONSTS.DURATION.MIN, CONSTS.DURATION.MAX);\n            },\n            validateGenre: function (genre) {\n                validateString(genre, CONSTS.GENRE.MIN, CONSTS.GENRE.MAX);\n            },\n            validatePattern: function (pattern) {\n                validateString(pattern, CONSTS.PATTERN.MIN, CONSTS.PATTERN.MAX);\n            },\n            validateCount: function (count) {\n                validateNumber(count, CONSTS.COUNT.MIN, CONSTS.COUNT.MAX);\n            }\n        };\n    }());\n\n    Item = (function (Parent) {\n        var             idGenerator;\n        idGenerator = idGeneratorFactory.get();\n\n        function Item(name, description) {\n            this.id = idGenerator.getNext();\n            this.name = name;\n            this.description = description;\n        }\n        Item.prototype = Object.create(Parent.prototype);\n        Object.defineProperty(Item.prototype, 'name', {\n            get: function () {\n                return this._name;\n            },\n            set: function (name) {\n                validator.validateName(name);\n                this._name = name;\n            }\n        });\n\n        Object.defineProperty(Item.prototype, 'description', {\n            get: function () {\n                return this._description;\n            },\n            set: function (description) {\n                validator.validateDescription(description);\n                this._description = description;\n            }\n        });\n\n        return Item;\n    }(function () {}));\n\n    Book = (function (Parent) {\n        function Book(name, isbn, genre, description) {\n            Parent.call(this, name, description);\n            this.isbn = isbn;\n            this.genre = genre;\n        }\n        Book.prototype = Object.create(Parent.prototype);\n        Object.defineProperty(Book.prototype, 'isbn', {\n            get: function () {\n                return this._isbn;\n            },\n            set: function (isbn) {\n                validator.validateISBN(isbn);\n                this._isbn = isbn;\n            }\n        });\n\n        Object.defineProperty(Book.prototype, 'genre', {\n            get: function () {\n                return this._genre;\n            },\n            set: function (genre) {\n                validator.validateGenre(genre);\n                this._genre = genre;\n            }\n        });\n        return Book;\n    }(Item));\n\n    Media = (function (Parent) {\n        function Media(name, rating, duration, description) {\n            Parent.call(this, name, description);\n            this.rating = rating;\n            this.duration = duration;\n        }\n\n        Object.defineProperty(Media.prototype, 'rating', {\n            get: function () {\n                return this._rating;\n            },\n            set: function (rating) {\n                validator.validateRating(rating);\n                this._rating = rating;\n            }\n        });\n        Object.defineProperty(Media.prototype, 'duration', {\n            get: function () {\n                return this._duration;\n            },\n            set: function (duration) {\n                validator.validateDuration(duration);\n                this._duration = duration;\n            }\n        });\n\n        return Media;\n    }(Item));\n\n    Catalog = (function () {\n        var idGenerator = idGeneratorFactory.get();\n\n        function Catalog(name) {\n            this.id = idGenerator.getNext();\n            this.name = name;\n            this.items = [];\n        }\n\n        Object.defineProperty(Catalog.prototype, 'name', {\n            get: function () {\n                return this._name;\n            },\n            set: function (name) {\n                validator.validateName(name);\n                this._name = name;\n            }\n        });\n\n        Catalog.prototype._validateItem = function (item) {\n            validator.validateId(item.id);\n            validator.validateName(item.name);\n            validator.validateDescription(item.description);\n        };\n\n        Catalog.prototype.add = function (item) {\n            if (typeof (item) === 'undefined') {\n                throw new Error('undefined cannot be added to a catalog');\n            }\n\n            if (typeof (item.length) !== 'undefined') {\n                return this.add.apply(this, item);\n            }\n            var itemsToAdd = [],\n                items = [].slice.call(arguments, 0),\n                that = this;\n            items.forEach(function (item) {\n                that._validateItem(item);\n                itemsToAdd.push(item);\n            });\n            [].push.apply(this.items, itemsToAdd);\n            return this;\n        };\n\n        Catalog.prototype.find = function (options) {\n            if (typeof (options) === 'undefined') {\n                throw new Error('Id must be ea number');\n            }\n            var isOnlyId = false,\n                result;\n            if (typeof (options) === 'number') {\n                options = {\n                    id: options\n                };\n                isOnlyId = true;\n            }\n            result = this.items.filter(function (item) {\n                return Object.keys(options)\n                    .every(function (key) {\n                        return options[key] === item[key];\n                    });\n            });\n            if (isOnlyId) {\n                if (result.length) {\n                    return result[0];\n                }\n                return null;\n            }\n            return result;\n        };\n\n        Catalog.prototype.search = function (pattern) {\n            validator.validatePattern(pattern);\n            pattern = pattern.toLowerCase();\n            return this.items.filter(function (item) {\n                return item.name.toLowerCase().indexOf(pattern) >= 0 ||\n                    item.description.toLowerCase().indexOf(pattern) >= 0;\n            });\n        };\n\n        return Catalog;\n    }());\n\n    BookCatalog = (function (Parent) {\n        function BookCatalog(name){\n            Parent.call(this, name);\n        }\n\n        BookCatalog.prototype._validateItem = function (book) {\n            Parent.prototype._validateItem.call(this, book);\n            validator.validateGenre(book.genre);\n            validator.validateISBN(book.isbn);\n        };\n\n        BookCatalog.prototype.getGenres = function () {\n            var genres = {};\n            this.items.forEach(function (item) {\n                genres[item.genre.toLowerCase()] = 1;\n            });\n            return Object.keys(genres);\n        };\n\n        return BookCatalog;\n    }(Catalog));\n\n    MediaCatalog = (function (Parent) {\n        function MediaCatalog(name){\n            Parent.call(this, name);\n        }\n\n        MediaCatalog.prototype._isValidItem = function (media) {\n            return parent._isValidItem.call(this, media) &&\n                validator.validateDuration(media.rating) &&\n                validator.validateRating(media.duration);\n        };\n\n        MediaCatalog.prototype.getTop = function (count) {\n            validator.validateCount(count);\n            var items = this.items.slice();\n            items.sort(function (i1, i2) {\n                return i2.rating - i1.rating;\n            });\n\n            return items.slice(0, count)\n                .map(function (item) {\n                    return {\n                        id: item.id,\n                        name: item.name\n                    };\n                });\n        };\n\n        MediaCatalog.prototype.getSortedByDuration = function () {\n            var itemsToReturn = this.items.slice();\n            itemsToReturn.sort(function (i1, i2) {\n                if (i1.duration === i2.duration) {\n                    return i1.id - i2.id;\n                }\n                return i2.duration - i1.duration;\n            });\n        };\n\n        return MediaCatalog;\n    }(Catalog));\n\n    return {\n        getBook: function (name, isbn, genre, description) {\n            return new Book(name, isbn, genre, description);\n        },\n        getMedia: function (name, rating, duration, description) {\n            return new Media(name, rating, duration, description);\n        },\n        getBookCatalog: function (name) {\n            return new BookCatalog(name);\n        },\n        getMediaCatalog: function (name) {\n            return new MediaCatalog(name);\n        }\n    };\n}\n\nmodule.exports = solve;"]}